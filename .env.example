# -------------------------
# Telegram bot
# -------------------------
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_BOT_USERNAME=your_bot_username_without_at

# -------------------------
# API server (backend)
# -------------------------
API_PORT=4000
API_BASE_URL=http://localhost:4000
STARTUP_MAX_RETRIES=20
STARTUP_RETRY_DELAY_MS=2000

# Telegram WebApp initData validation max age (seconds).
WEBAPP_AUTH_MAX_AGE_SEC=86400

# Extra diagnostic logging for Mini App issues (0/1).
DEBUG_WEBAPP_LOGS=0

# -------------------------
# Mini App URL (used by bot button)
# Must be HTTPS in Telegram.
# -------------------------
# Optional base used only as a fallback if WEB_APP_URL is not set.
FRONTEND_BASE_URL=http://localhost:3000
WEB_APP_URL=http://localhost:3000/

# Shared secret used by Next.js middleware to allow Mini App pages access.
MINIAPP_ACCESS_TOKEN=change_me

# -------------------------
# Database
# -------------------------
# Use `pg` for docker compose, `sqlite3` for local sqlite.
DB_CLIENT=pg

# For DB_CLIENT=pg (docker compose):
# DATABASE_URL=postgres://postgres:postgres@postgres:5432/animebot
DATABASE_URL=postgres://postgres:postgres@localhost:5432/animebot

# For DB_CLIENT=sqlite3 (local):
DB_PATH=./data/anime.sqlite3

# -------------------------
# Watch links (anicli_api)
# -------------------------
# URL of the internal `watch-api` service.
WATCH_API_URL=http://watch-api:8000

# Comma-separated list of allowed anicli sources (optional). Empty = allow any available extractor.
WATCH_SOURCES_ALLOWLIST=animego,animevost,anilibria

# TTL for python watch-api refs/caches (seconds).
WATCH_API_TTL_SEC=3600

# -------------------------
# Postgres image (docker compose)
# -------------------------
POSTGRES_DB=animebot
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# -------------------------
# Telegram webhook (optional)
# -------------------------
TELEGRAM_WEBHOOK_URL=
TELEGRAM_WEBHOOK_SECRET=
TELEGRAM_WEBHOOK_PATH=/webhook
